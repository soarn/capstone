{% extends "base.html" %}

{% block title %}Home - Stock Trading System{% endblock %}

{% block content %}
    <!-- Main Content -->
    <div class="container main-content mt-4">
        <div class="row">
            <!-- Popular Stocks Section -->
            <div class="col-md-6" id="popular-stocks">
                <div class="stock-box">
                    <h4>Popular Stocks</h4>
                    <ul>
                        <li>Apple (AAPL): <span id="aapl-price">$150</span></li>
                        <li>Amazon (AMZN): <span id="amzn-price">$3200</span></li>
                        <li>Google (GOOGL): <span id="googl-price">$2800</span></li>
                        <li>Tesla (TSLA): <span id="tsla-price">$720</span></li>
                    </ul>
                </div>
            </div>

            <!-- All Stocks Section -->
            <div class="col-md-6" id="all-stocks">
                <div class="stock-box">
                    <h4>All Stocks</h4>
                    <ul>
                        <li>Microsoft (MSFT): <span id="msft-price">$300</span></li>
                        <li>Netflix (NFLX): <span id="nflx-price">$520</span></li>
                        <li>Facebook (META): <span id="meta-price">$340</span></li>
                        <li>Twitter (TWTR): <span id="twtr-price">$45</span></li>
                        <li>Intel (INTC): <span id="intc-price">$55</span></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Buy and Sell Buttons at Bottom -->
        <div id="action-buttons" class="mt-5">
            <button type="button" class="btn btn-success btn-large">Buy</button>
            <button type="button" class="btn btn-danger btn-large">Sell</button>
        </div>

        <!-- Market Price Fluctuation -->
        <div class="mt-5">
            <h5>Market Price</h5>
            <p>Random Stock Price Generator: Allow stock prices to fluctuate during the day with a custom random price generator. The cost will gradually go up or down throughout the day.</p>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- JavaScript for Market Price Fluctuation -->
    <script>
        // Initial stock prices
        const stockPrices = {
            aapl: 150,
            amzn: 3200,
            googl: 2800,
            tsla: 720,
            msft: 300,
            nflx: 520,
            meta: 340,
            twtr: 45,
            intc: 55
        };

        // Function to update the stock prices randomly
        function updateStockPrices() {
            for (let stock in stockPrices) {
                // Randomly increase or decrease stock price by 0.5% to 1.5%
                let fluctuation = (Math.random() * 0.02 - 0.01); // +/- 1% change
                stockPrices[stock] = (stockPrices[stock] * (1 + fluctuation)).toFixed(2);

                // Update the price in the HTML
                document.getElementById(`${stock}-price`).textContent = `$${stockPrices[stock]}`;
            }
        }

        // Update stock prices every 3 seconds
        setInterval(updateStockPrices, 3000);
    </script>
</body>
</html>
{% endblock %}
